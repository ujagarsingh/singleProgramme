<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,
      shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <title>Right Menu GST</title>
  </head>
  <body>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"></script>
    <script>
	var _mData = [{"Jan":"5"}];
	var _oldData = [{"Com_id":"2","Name":"abc","Jan":""},{"Com_id":"2","Name":"efg","Jan":""},{"Com_id":"2","Name":"hij","Jan":""},{"Com_id":"2","Name":"kal","Jan":"5"},{"Com_id":"2","Name":"mno","Jan":""}];
	var _newData = [{"Com_id":"2","Name":"abc","Jan":"4","Feb":"4"},{"Com_id":"2","Name":"efg","Jan":"3"},{"Com_id":"2","Name":"hij","Jan":"5"},{"Com_id":"2","Name":"kal","Jan":"3"},{"Com_id":"2","Name":"mno","Jan":"4"}];
	var _finalData = [];
	
	
	function validate(oldData, newData){
    let _error = '';
		const _com_id = oldData[0]['Com_id'];

		const _old_lenth = oldData.length;
		const _new_lenth = newData.length;
    let isError = false;
    
    if(_old_lenth !== _new_lenth){
       alert('Lenth are Wrong');
       return false;
    } 
    
    oldData.map((oItem, oInx)=>{
    const _old_keys = Object.keys(oldData[oInx]);
		const _new_keys = Object.keys(newData[oInx]);
    const _inx = oInx+1;
    let _currentData = {};

      if (JSON.stringify(_old_keys) !== JSON.stringify(_new_keys)){
        alert('Keys are Wrong in obj >__ '+ _inx) ;
        isError = true;
        return false;
      } else {
        if(_oldData[oInx]['Com_id'] !== _newData[oInx]['Com_id']){
            alert('Values are Wrong in obj[Com_Id] >__ '+ _inx) ;
            isError = true;
            return false;
        } else if(_oldData[oInx]['Name'] !== _newData[oInx]['Name']){
            alert('Values are Wrong in obj[Name] >__ '+ _inx) ;
            isError = true;
            return false;
        } else if(!isError){
          _old_keys.map((kItem)=>{
            const _filter_key = Object.keys(_mData[0]);
            if(_filter_key.includes(kItem)){

              if(_newData[oInx][kItem] <= _mData[0][kItem]){
                _currentData[kItem] = _newData[oInx][kItem];
              } else {
                alert('Values are Wrong in obj >__ '+ _inx) ;
                isError = true;
                return false;
              }

            } else {
            _currentData[kItem] = _newData[oInx][kItem];
            }
        })
        _finalData.push(_currentData);
        }
      }

    })
    if(!isError){
      alert('Everything Ok!!!');
    }
    console.log(_finalData);
	};
	
	validate(_oldData, _newData);
	</script>
  </body>
</html>
